<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Multi-Category Image Guessing Game</title>
    <style>
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background: linear-gradient(135deg, #6a11cb 0%, #2575fc 100%);
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 20px;
            color: #333;
        }
        
        .container {
            max-width: 1000px;
            width: 100%;
            background: white;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
            padding: 25px;
            margin-top: 20px;
        }
        
        .header {
            text-align: center;
            color: white;
            margin-bottom: 10px;
        }
        
        .header h1 {
            color: white;
            font-size: 3rem;
            margin-bottom: 10px;
        }
        
        .header p {
            font-size: 1.2rem;
            max-width: 800px;
            margin: 0 auto;
        }
        
        .players-container {
            display: flex;
            justify-content: space-between;
            margin-bottom: 30px;
        }
        
        .player {
            text-align: center;
            padding: 15px;
            border-radius: 10px;
            width: 45%;
            transition: all 0.3s ease;
            position: relative;
            background: #f8f9fa;
        }
        
        .player.active {
            background: #e3f2fd;
            box-shadow: 0 5px 15px rgba(33, 150, 243, 0.3);
            transform: scale(1.03);
        }
        
        .player h2 {
            font-size: 1.5rem;
            margin-bottom: 10px;
            color: #2c3e50;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .player-name {
            border: none;
            background: transparent;
            font-size: 1.5rem;
            text-align: center;
            width: auto;
            max-width: 120px;
            padding: 5px;
            border-radius: 4px;
            margin: 0 5px;
            border: 1px solid #ddd;
        }
        
        .player-name:focus {
            outline: none;
            background: rgba(255, 255, 255, 0.8);
            box-shadow: 0 0 0 2px #2196f3;
        }
        
        .score {
            font-size: 2rem;
            font-weight: bold;
            color: #2196f3;
        }
        
        .time-bank {
            margin-top: 10px;
            font-size: 1.2rem;
            color: #e74c3c;
        }
        
        .game-area {
            text-align: center;
            margin-bottom: 30px;
        }
        
        .image-container {
            width: 100%;
            height: 500px;
            margin: 20px 0;
            padding: 20px;
            background: #f8f9fa;
            border-radius: 10px;
            box-shadow: inset 0 0 10px rgba(0, 0, 0, 0.1);
            display: flex;
            align-items: center;
            justify-content: center;
            overflow: hidden;
        }
        
        #currentImage {
            max-width: 100%;
            max-height: 100%;
            object-fit: contain;
            border-radius: 8px;
        }
        
        .answer-display {
            font-size: 2rem;
            margin: 15px 0;
            padding: 15px;
            border-radius: 10px;
            min-height: 80px;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
        }
        
        .correct-answer {
            background: #e8f5e9;
            color: #2e7d32;
            font-weight: bold;
        }
        
        .pass-answer {
            background: #ffebee;
            color: #c62828;
            font-weight: bold;
        }
        
        .controls {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin-bottom: 30px;
        }
        .toggle-btn {
            background: #2196f3;
            color: white;
            border: none;
            padding: 5px 10px;
            border-radius: 4px;
            cursor: pointer;
            font-size: 0.8rem;
            margin-left: 10px;
        }

        .toggle-btn:hover {
            background: #1976d2;
        }

        .categories.hidden {
            display: none;
        }

        .category p {
            display: none;
        }

        .category.selected p {
            display: block;
        }
        
        button {
            padding: 15px 30px;
            font-size: 1.2rem;
            border: none;
            border-radius: 50px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: bold;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
            position: relative;
        }
        
        button:disabled {
            opacity: 0.6;
            cursor: not-allowed;
            transform: none !important;
        }
        
        .key-shortcut {
            position: absolute;
            top: -10px;
            right: -10px;
            background: #555;
            color: white;
            border-radius: 50%;
            width: 30px;
            height: 30px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.9rem;
        }
        
        #correctBtn {
            background: #4caf50;
            color: white;
        }
        
        #correctBtn:hover:not(:disabled) {
            background: #388e3c;
            transform: translateY(-3px);
        }
        
        #passBtn {
            background: #f44336;
            color: white;
        }
        
        #passBtn:hover:not(:disabled) {
            background: #d32f2f;
            transform: translateY(-3px);
        }
        
        #pauseBtn {
            background: #ff9800;
            color: white;
        }
        
        #pauseBtn:hover:not(:disabled) {
            background: #f57c00;
            transform: translateY(-3px);
        }
        
        #pauseBtn.paused {
            background: #2196f3;
        }
        
        #pauseBtn.paused:hover:not(:disabled) {
            background: #1976d2;
        }
        
        #startBtn {
            background: #2196f3;
            color: white;
            padding: 15px 40px;
            margin: 0 auto;
            display: block;
        }
        
        #startBtn:hover {
            background: #1976d2;
            transform: translateY(-3px);
        }
        

        #endGameBtn {
           background: #9c27b0;
           color: white;
           margin-top: 10px;
        }

        #endGameBtn:hover:not(:disabled) {
        background: #7b1fa2;
        transform: translateY(-3px);
        }

        .instructions {
            background: #e3f2fd;
            padding: 20px;
            border-radius: 10px;
            margin-top: 20px;
        }       
        .instructions h3 {
            margin-bottom: 10px;
            color: #2c3e50;
        }
        
        .instructions ul {
            list-style-type: none;
            padding-left: 20px;
            margin-bottom: 15px;
        }
        
        .instructions li {
            margin-bottom: 8px;
            position: relative;
            padding-left: 25px;
        }
        
        .instructions li:before {
            content: "•";
            color: #2196f3;
            font-weight: bold;
            position: absolute;
            left: 0;
        }
        
        .game-over {
            text-align: center;
            padding: 20px;
            background: #fff8e1;
            border-radius: 10px;
            margin-top: 20px;
            display: none;
        }
        
        .game-over h2 {
            color: #f57c00;
            margin-bottom: 15px;
        }
        
        .settings {
            background: #f5f5f5;
            padding: 15px;
            border-radius: 10px;
            margin-bottom: 20px;
        }
        
        .settings h3 {
            margin-bottom: 10px;
            color: #2c3e50;
        }
        
        .settings label {
            display: block;
            margin: 8px 0;
            display: flex;
            align-items: center;
            justify-content: space-between;
        }
        
        .settings input {
            padding: 8px;
            width: 80px;
            border: 1px solid #ddd;
            border-radius: 4px;
        }
        
        .category-selection {
            background: #fff3e0;
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 20px;
        }
        
        .category-selection h3 {
            color: #2c3e50;
            margin-bottom: 15px;
        }
        
        .categories {
            display: flex;
            flex-wrap: wrap;
            gap: 15px;
            margin-bottom: 15px;
        }
        
        .category {
            flex: 1;
            min-width: 200px;
            padding: 15px;
            background: white;
            border-radius: 8px;
            border: 2px solid #ff9800;
            cursor: pointer;
            transition: all 0.3s ease;
            text-align: center;
        }
        
        .category:hover {
            transform: translateY(-3px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        }
        
        .category.selected {
            background: #ff9800;
            color: white;
        }
        
        .category h4 {
            margin-bottom: 10px;
            color: #2c3e50;
        }
        
        .category.selected h4 {
            color: white;
        }
        
        .category p {
            font-size: 0.9rem;
            color: #666;
        }
        
        .category.selected p {
            color: #f0f0f0;
        }
        
        .github-url {
            background: white;
            padding: 15px;
            border-radius: 8px;
            margin-top: 15px;
            font-family: monospace;
            word-break: break-all;
            border: 1px dashed #ccc;
        }
        .players-container.four-players {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
        }

        .players-container.four-players .player {
            width: 100%;
        }

        @media (max-width: 768px) {
            .players-container.four-players {
                grid-template-columns: 1fr;
            }
        }
                @media (max-width: 600px) {
            .players-container {
                flex-direction: column;
                align-items: center;
            }
            
            .player {
                width: 100%;
                margin-bottom: 15px;
            }
            
            .image-container {
                height: 350px;
            }
            
            .controls {
                flex-direction: column;
                align-items: center;
            }
            
            button {
                width: 80%;
            }
            
            .settings label {
                flex-direction: column;
                align-items: flex-start;
            }
            
            .settings input {
                width: 100%;
                margin-top: 5px;
            }
            
            .player-name {
                max-width: 100px;
            }
            
            .header h1 {
                font-size: 2.2rem;
            }
            
            .categories {
                flex-direction: column;
            }
        }
    </style>
</head>
<body>
    <div class="header">
        <h1>Multi-Category Image Guessing Game</h1>
        <p>Choose from different image categories for each round of the game</p>
    </div>
    
    <div class="container">        
        <div class="settings">
            <h3>Game Settings</h3>
            <label>
                Number of Players:
                <select id="playerCount">
                    <option value="2">2 Players</option>
                    <option value="3">3 Players</option>
                    <option value="4">4 Players</option>
                </select>
            </label>
            <label>
                Initial Time (seconds):
                <input type="number" id="initialTime" value="300" min="10" max="300">
            </label>
            <label>
                Pass Penalty (seconds):
                <input type="number" id="passPenalty" value="10" min="0" max="30">
            </label>
        </div>
        
        <div class="players-container" id="playersContainer">
            <div class="player" id="player1">
                <h2>
                    <span>Player</span>
                    <input type="text" class="player-name" id="player1Name" value="Player 1" maxlength="12">
                </h2>
                <div class="score">0</div>
                <div class="time-bank">Time: 300.0s</div>
            </div>
            <div class="player" id="player2">
                <h2>
                    <span>Player</span>
                    <input type="text" class="player-name" id="player2Name" value="Player 2" maxlength="12">
                </h2>
                <div class="score">0</div>
                <div class="time-bank">Time: 300.0s</div>
            </div>
            <!-- Players 3 and 4 will be added dynamically -->
        </div>
        
        <div class="game-area">
            <div class="image-container">
                <img id="currentImage" src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='400' height='300' viewBox='0 0 400 300'%3E%3Crect width='400' height='300' fill='%23f8f9fa'/%3E%3Ctext x='50%25' y='50%25' dominant-baseline='middle' text-anchor='middle' font-family='sans-serif' font-size='24' fill='%23ccc'%3ESelect a category to start%3C/text%3E%3C/svg%3E">
            </div>
            <div class="answer-display" id="answerDisplay"></div>
            
            <div class="controls">
                <button id="correctBtn">
                    <span class="key-shortcut">←</span>
                    Correct!
                </button>
                <button id="pauseBtn">
                    <span class="key-shortcut">P</span>
                    Pause
                </button>
                <button id="passBtn">
                    <span class="key-shortcut">→</span>
                    Pass
                </button>
                <button id="endGameBtn">
                    <span class="key-shortcut">x</span>
                    End Game
                </button>
            </div>
            
            <div class="keyboard-hint">
                Use keyboard shortcuts: ← for Correct, P for Pause, → for Pass, x for End Game
            </div>
            
            <button id="startBtn">Start Game</button>
        </div>
        
        <div class="game-over" id="gameOver">
            <h2>Game Over!</h2>
            <p id="winnerMessage"></p>
            <button id="restartBtn">Play Again</button>
        </div>

        <div class="category-selection">
            <h3>Select Image Category
                <button id="toggleCategories" class="toggle-btn">Hide</button>
            </h3>

            <div class="categories">
                <div class="category" data-category="ATT">
                    <h4>ATT</h4>
                    <p>Attractions</p>
                </div>
                <div class="category" data-category="MPP">
                    <h4>MPP</h4>
                    <p>Meet-the-People</p>
                </div>
                <div class="category" data-category="SGM">
                    <h4>SGM</h4>
                    <p>Mallwalker</p>
                </div>
                <div class="category" data-category="HKF">
                    <h4>HKF</h4>
                    <p>Hawker Fare</p>
                </div>
                <div class="category" data-category="KNP">
                    <h4>KNP</h4>
                    <p>Snacks & Pastries</p>
                </div>
                <div class="category" data-category="DST">
                    <h4>DST</h4>
                    <p>Just Desserts</p>
                </div>
                <div class="category" data-category="DSS">
                    <h4>DSS</h4>
                    <p>Dim Sum Stall</p>
                </div>
                <div class="category" data-category="MAS">
                    <h4>MAS</h4>
                    <p>SG Mascots</p>
                </div>
                <div class="category" data-category="PACS">
                    <h4>PACS</h4>
                    <p>Arts & Clubs</p>
                </div>
                <div class="category" data-category="UGSP">
                    <h4>UGSP</h4>
                    <p>UGs & Sports</p>
                </div>            
            </div>
            <p>Selected category: <span id="selectedCategory">None</span></p>
        </div>
        <div class="instructions">
            <h3>Game Rules</h3>
            <ul>
                <li>Players take turns guessing what's shown in the picture</li>
                <li>The answer is the filename of the image (without extension)</li>
                <li>Click "Correct!" to get 1 point and show the correct answer (green)</li>
                <li>Click "Pass" to skip the image, show the answer (red) and deduct time</li>
                <li>Each player has an individual time bank - game ends when time runs out</li>
                <li>Time only decreases during guessing, not when answers are shown</li>
                <li>Images won't repeat during the same game</li>
                <li>Game ends when either time runs out or all images are used</li>
                <li>Press P or click Pause button to pause/resume the game</li>
            </ul>
            <h3>How to Add Your Own Categories</h3>
            <p>Edit the CATEGORIES object in the JavaScript to add your own image sets. Use the format: <code>category_name: ["image_url_1", "image_url_2", ...]</code></p>
        </div>
    </div>

    <script>
        // Define your image categories here
        const CATEGORIES = {
            ATT: [
                "Adventure Cove Waterpark.jpg",
                "ArtScience Museum.jpg",
                "Bird Paradise.jpg",
                "Botanic Gardens.jpg",
                "Buddha Tooth Relic Temple.jpg",
                "CHIJMES.jpeg",
                "Chinatown.jpg",
                "Chinese Garden.jpg",
                "Civilian War Memorial.jpg",
                "Cloud Forest.jpg",
                "Esplanade.jpg",
                "Flower Dome.jpg",
                "Fort Canning Park.jpg",
                "Fort Siloso.jpg",
                "Fountain of Wealth.jpg",
                "Gardens By The Bay.jpg",
                "Haji Lane.jpg",
                "Haw Par Villa.jpg",
                "Helix Bridge.jpg",
                "Japanese Garden.jpg",
                "Jewel Changi.jpg",
                "Lau Pa Sat.jpg",
                "Marina Bay Sands.jpg",
                "Merlion.jpg",
                "National Gallery.jpg",
                "National Museum of Singapore.jpg",
                "Night Safari.jpg",
                "River Wonders.jpg",
                "Science Centre.jpg",
                "Sentosa Island.jpg",
                "Singapore Flyer.jpg",
                "Singapore Oceanarium.jpg",
                "Singapore Zoo.jpg",
                "SkyHelix Sentosa.jpg",
                "Snow City.jpg",
                "Sultan Mosque or Kampong Glam or Arab Street.jpg",
                "Universal Studios Singapore.jpg",
                "Wild Wild Wet @ Downtown East.jpg"
            ].map(filename => `https://raw.githubusercontent.com/jigglinjelly/Category-Pic-Guessing-Game/main/images/ATT/${filename}`),
            MPP: [
                "Amy Khor.jpg",
                "Baey Yam Keng.jpg",
                "Chan Chun Sing.jpg",
                "Chee Hong Tat.jpg",
                "Darryl David.jpg",
                "Denise Phua.jpg",
                "Desmond Lee.jpg",
                "Edwin Tong.jpg",
                "Gan Kim Yong.png",
                "Goh Chok Tong.jpg",
                "Goh Meng Seng",
                "Grace Fu.jpg",
                "Heng Swee Keat.jpg",
                "Jamus Lim.jpg",
                "Jeffrey Siow.jpg",
                "Josephine Teo.jpg",
                "K Shanmugam.jpg",
                "Koh Poh Koon.jpg",
                "Lawrence Wong.jpg",
                "Lee Hsien Loong.JPG",
                "Leon Perera.jpg",
                "Low Thia Khiang.jpg",
                "Low Yen Ling.jpg",
                "Masagos Zulkifli Bin Masagos Mohamad.jpg",
                "Ng Chee Meng.jpg",
                "Ng Eng Hen.jpg",
                "Nicole Seah.jpg",
                "Ong Ye Kung.jpg",
                "Pritam Singh.jpg",
                "Seah Kian Peng.jpg",
                "Sun Xueling.jpg",
                "Sylvia Lim.jpg",
                "Tan Chuan Jin.jpg",
                "Tan See Leng.jpg",
                "Teo Chee Hean.jpg",
                "Tin Pei Ling.jpg",
                "Vivian Balakrishnan.jpg"
            ].map(filename => `https://raw.githubusercontent.com/jigglinjelly/Category-Pic-Guessing-Game/main/images/MPP/${filename}`),    
            SGM: [
                "313@Somerset.jpg",
                "Bugis Junction.jpg",
                "Bugis Street.jpg",
                "Bugis+.jpg",
                "Centrepoint.jpg",
                "Clarke Quay Central.jpg",
                "Funan.jpg",
                "Hillion Mall.jpg",
                "ION Orchard.jpg",
                "Jem.jpg",
                "Jewel.jpg",
                "Junction 8.jpg",
                "Jurong Point.jpg",
                "Lot One.jpg",
                "Lucky Plaza.jpg",
                "Marina Square.jpg",
                "Mustafa Centre.jpg",
                "NEX.jpg",
                "Ngee Ann City.jpg",
                "Orchard Central Orchard Gateway.jpg",
                "Plaza Singapura.jpg",
                "Raffles City.jpg",
                "SingPost Centre.jpg",
                "Star Vista.jpg",
                "Suntec City.jpg",
                "Tampines Mall.jpg",
                "Tang Plaza.jpg",
                "The Cathay.jpg",
                "The Shoppes at Marina Bay Sands.jpg",
                "Vivocity.jpg",
                "Westgate.jpg"
            ].map(filename => `https://raw.githubusercontent.com/jigglinjelly/Category-Pic-Guessing-Game/main/images/SGM/${filename}`), 
            HKF: [
                "Bak Chor Mee.png",
                "Bakuteh.png",
                "Ban Mian.jpg",
                "Briyani.png",
                "Char Kway Teow.png",
                "Chicken Rice.png",
                "Chilli Crab.png",
                "Duck Rice.jpg",
                "Fish Soup Beehoon.jpg",
                "Fish Soup Beehoon.png",
                "Fried Carrot Cake.png",
                "Har Cheong Gai.jpg",
                "Hokkien Mee.jpg",
                "Indian Rojak.jpg",
                "Kway Chap.jpg",
                "Laksa.jpg",
                "Lor Mee.png",
                "Mala Xiang Guo.jpg",
                "Mee Hoon Kueh.jpg",
                "Mee Reebus.png",
                "Mee Siam.png",
                "Mee Soto.jpg",
                "Mutton Soup.jpg",
                "Nasi Lemak.jpg",
                "Oyster Omelette.jpg",
                "Pig Organ Soup.jpg",
                "Popiah.png",
                "Prawn Noodle.png",
                "Raw Fish 鱼生.jpg",
                "Rojak.png",
                "Roti Prata.png",
                "Satay.jpg",
                "Teochew Porridge.jpg",
                "Thosai.jpg",
                "Thunder Tea Rice.png",
                "Wanton Mee.png",
                "Yong Tau Foo.png"
            ].map(filename => `https://raw.githubusercontent.com/jigglinjelly/Category-Pic-Guessing-Game/main/images/HKF/${filename}`), 
            KNP: [
                "Ang Ku Kueh.png",
                "Banana Cake.jpg",
                "Butterfly Fritters.png",
                "Chwee Kueh.png",
                "Coffee Bun or Rotiboy.jpg",
                "Curry Puff.png",
                "Gem Biscuits.jpg",
                "Glutinous Rice Dumplings or Zong Zi.png",
                "Ham Chim Peng.png",
                "Huat Kueh.png",
                "Kaya Toast.png",
                "Kek Lapis.png",
                "Kueh Bahulu.png",
                "Kueh Bangkit.png",
                "Kueh Lapis 九层糕.png",
                "Kueh Pie Tee.png",
                "Kueh Salat.png",
                "Min Chiang Kueh.png",
                "Mooncake.png",
                "Muah Chee.jpg",
                "Muruku.jpg",
                "Ngoh Hiang.png",
                "Ondeh Ondeh.png",
                "Oyster Puff.jpg",
                "Pandan Chiffon Cake.png",
                "Png Kueh.png",
                "Pork Floss Bun.jpg",
                "Putu Piring.png",
                "Samosa.jpg",
                "Teochew Mooncake.png",
                "Tutu Kueh.png",
                "Vadai.png",
                "You Tiao.png"
            ].map(filename => `https://raw.githubusercontent.com/jigglinjelly/Category-Pic-Guessing-Game/main/images/KNP/${filename}`), 
            DST: [
                "Almond Cream 杏仁糊.jpg",
                "Black Sesame Paste 芝麻糊.jpg",
                "Bobo Cha Cha.jpg",
                "Chendol.jpg",
                "Cheng Tng.jpg",
                "Chocolate Tissue Prata.jpg",
                "Durian Pengat.jpg",
                "Glutinous Rice Balls or Tang Yuan.jpg",
                "Green Bean Soup.jpg",
                "Ice Aiyu Jelly 文頭雪.jpg",
                "Ice Cream Sandwich.jpg",
                "Ice Kachang.jpg",
                "Iced Soursop.jpg",
                "Milo Dinosaur.jpg",
                "Osmanthus Jelly 桂花糕.jpg",
                "Patbingsu.jpg",
                "Pulut Hitam 黑糯米.jpg",
                "Red Bean Soup.jpg",
                "Sea Coconut w Longan.jpg",
                "Soya Beancurd Tao Huay.jpg",
                "Soya Pudding.jpg",
                "Steamed Milk 炖鲜奶.jpg",
                "Tau Suan.jpg",
                "Walnut Paste 核桃糊.jpg",
                "Yam Paste 芋泥.jpg"
            ].map(filename => `https://raw.githubusercontent.com/jigglinjelly/Category-Pic-Guessing-Game/main/images/DST/${filename}`), 
            DSS: [
                "Beancurd Roll.jpg",
                "Big Bao 大包.jpg",
                "Carrot Cake.jpg",
                "Century Egg Congee or Porridge.jpg",
                "Char Siew Bao.jpg",
                "Chee Cheong Fun.jpg",
                "Chicken Claw 凤爪.jpg",
                "Chilli Oil Dumplings 红油抄手.jpg",
                "Chives Dumpling 韭菜餃子.jpg",
                "Egg Tarts.jpg",
                "Fried Shrimp Dumpling.jpg",
                "Har Gao.jpg",
                "Herbal Jelly 龟苓膏.jpg",
                "Lo Mai Kai.jpg",
                "Longevity Peach Bun 寿桃包.jpg",
                "Lotus Seed Bun 蓮蓉包.jpg",
                "Malay Steamed Cake 马来糕.jpg",
                "Mango Pomelo Sago 杨枝甘露.jpg",
                "Mango Pudding.jpg",
                "Pineapple Bun 菠蘿包.jpg",
                "Portuguese Egg Tart.jpg",
                "Red Bean Paste Bun.jpg",
                "Salted Egg Yolk Custard Bun 流沙包.jpg",
                "Siew Mai.jpg",
                "Soon Kueh.jpg",
                "Spring Roll.jpg",
                "Xiao Long Bao.jpg",
                "Yam Cake or Orh Kueh.jpg"
            ].map(filename => `https://raw.githubusercontent.com/jigglinjelly/Category-Pic-Guessing-Game/main/images/DSS/${filename}`), 
            MAS: [
                "August the Merlion.jpg",
                "Bag-Down Benny.jpg",
                "Bloobin.jpg",
                "Blood Buddy.jpg",
                "Captain Green.jpg",
                "Give-Way Glenda.jpg",
                "Hush-Hush Hannah.jpg",
                "LiNUS.jpg",
                "Lyo.jpg",
                "Lyon the Lion.jpg",
                "Merli.jpg",
                "Merly.jpg",
                "Move-In Martin.jpg",
                "Nila.jpg",
                "Sharity Elephant.jpg",
                "Singa the Lion.jpg",
                "Smiley Squirrel.jpg",
                "Stand-up Stacey.jpg",
                "Teamy the Productivity Bee.jpg",
                "Water Sally.jpg",
                "Water Wally.jpg"
            ].map(filename => `https://raw.githubusercontent.com/jigglinjelly/Category-Pic-Guessing-Game/main/images/MAS/${filename}`), 
            PACS: [
                "Angklung Ensemble.jpg",
                "Astronomy Club.jpg",
                "AVA Club.jpg",
                "Chess Club.jpg",
                "Chinese Calligraphy.jpg",
                "Chinese Chess.jpg",
                "Chinese Dance.jpg",
                "Chinese Orchestra.jpg",
                "Choir.jpg",
                "Debate Club.jpg",
                "Drama Club.jpg",
                "Guitar Club.jpg",
                "Guzheng Ensemble.jpg",
                "Handbell Ensemble.jpg",
                "Indian Dance.jpg",
                "Interact Club.jpg",
                "Library Club.jpg",
                "Malay Dance.jpg",
                "Military or Marching Band.jpg",
                "Modern Dance.jpg",
                "Percussion Ensemble.jpg",
                "Photography Club.jpg",
                "Piano Ensemble.jpg",
                "Robotics Club.jpg",
                "Singapore Youth Flying Club.jpg",
                "String Ensemble.jpg",
                "Visual Arts Club.jpg",
                "Weiqi or Go.jpg",
                "Symphonic Band.jpg"
            ].map(filename => `https://raw.githubusercontent.com/jigglinjelly/Category-Pic-Guessing-Game/main/images/PACS/${filename}`),
            UGSP: [
                "Akido.jpg",
                "Archery.jpg",
                "Badminton.jpg",
                "Basketball.jpg",
                "Boys Brigade.jpg",
                "Cricket.jpg",
                "Fencing.jpg",
                "Floorball.jpg",
                "Football.jpg",
                "Girl Guides.jpg",
                "Girls Brigade.jpg",
                "Golf.jpg",
                "Gymnastics.jpg",
                "Hockey.jpg",
                "NCC Air.jpg",
                "NCC Land.jpg",
                "NCC Sea.jpg",
                "NCDCC.jpg",
                "Netball.jpg",
                "NPCC.jpg",
                "ODAC.jpg",
                "Red Cross Youth.jpg",
                "Rugby.jpg",
                "Sailing.jpg",
                "Scouts.jpg",
                "Sepak Takraw.jpg",
                "Shooting.jpg",
                "Softball.jpg",
                "Squash.jpg",
                "St John Ambulance Brigade.jpg",
                "Swimming.jpg",
                "Table Tennis.jpg",
                "Taekwondo.jpg",
                "Tchoukball.jpg",
                "Tennis.jpg",
                "Track And Field.jpg",
                "Ultimate Frisbee.jpg",
                "Volleyball.jpg",
                "Water Polo.jpg",
                "Wushu.jpg"
            ].map(filename => `https://raw.githubusercontent.com/jigglinjelly/Category-Pic-Guessing-Game/main/images/UGSP/${filename}`),
        };

        document.addEventListener('DOMContentLoaded', function() {
            // Game elements
            const currentImageElement = document.getElementById('currentImage');
            const answerDisplayElement = document.getElementById('answerDisplay');
            const correctBtn = document.getElementById('correctBtn');
            const passBtn = document.getElementById('passBtn');
            const pauseBtn = document.getElementById('pauseBtn');
            const startBtn = document.getElementById('startBtn');
            const endGameBtn = document.getElementById('endGameBtn');
            const restartBtn = document.getElementById('restartBtn');
            const gameOverElement = document.getElementById('gameOver');
            const winnerMessageElement = document.getElementById('winnerMessage');
            const playersContainer = document.getElementById('playersContainer');
            const playerCountSelect = document.getElementById('playerCount');
            const initialTimeInput = document.getElementById('initialTime');
            const passPenaltyInput = document.getElementById('passPenalty');
            const categoryElements = document.querySelectorAll('.category');
            const selectedCategoryElement = document.getElementById('selectedCategory');
            const toggleBtn = document.getElementById('toggleCategories');

            // Game state
            let currentPlayer = 1;
            let playerScores = [0, 0, 0, 0]; // Index 0 unused, players start from 1
            let playerTimes = [0, 60, 60, 60, 60]; // Index 0 unused, players start from 1
            let playerNames = ['', 'Player 1', 'Player 2', 'Player 3', 'Player 4'];
            let totalPlayers = 2;
            let timerInterval = null;
            let gameActive = false;
            let gamePaused = false;
            let answerTimeout = null;
            let lastTimerUpdate = 0;
            let usedImages = [];
            let availableImages = [];
            let selectedCategory = null;
            let currentImage = null;

            // Toggle categories visibility
            function toggleCategories() {
                const categoriesContainer = document.querySelector('.categories');
                categoriesContainer.classList.toggle('hidden');
                
                if (categoriesContainer.classList.contains('hidden')) {
                    toggleBtn.textContent = 'Show';
                } else {
                    toggleBtn.textContent = 'Hide';
                }
            }

            // Create player elements dynamically
            function createPlayerElements() {
                totalPlayers = parseInt(playerCountSelect.value);
                
                // Clear existing players except first two
                const existingPlayers = playersContainer.querySelectorAll('.player');
                for (let i = 2; i < existingPlayers.length; i++) {
                    existingPlayers[i].remove();
                }
                
                // Update player 1 and 2 names based on total players
                document.getElementById('player1Name').value = totalPlayers >= 1 ? 'Player 1' : '';
                document.getElementById('player2Name').value = totalPlayers >= 2 ? 'Player 2' : '';
                
                // Create players 3 and 4 if needed
                if (totalPlayers >= 3) {
                    const player3 = document.createElement('div');
                    player3.className = 'player';
                    player3.id = 'player3';
                    player3.innerHTML = `
                        <h2>
                            <span>Player</span>
                            <input type="text" class="player-name" id="player3Name" value="Player 3" maxlength="12">
                        </h2>
                        <div class="score">0</div>
                        <div class="time-bank">Time: 60.0s</div>
                    `;
                    playersContainer.appendChild(player3);
                }
                
                if (totalPlayers >= 4) {
                    const player4 = document.createElement('div');
                    player4.className = 'player';
                    player4.id = 'player4';
                    player4.innerHTML = `
                        <h2>
                            <span>Player</span>
                            <input type="text" class="player-name" id="player4Name" value="Player 4" maxlength="12">
                        </h2>
                        <div class="score">0</div>
                        <div class="time-bank">Time: 60.0s</div>
                    `;
                    playersContainer.appendChild(player4);
                }
                
                // Update container class for styling
                playersContainer.className = totalPlayers === 4 ? 'players-container four-players' : 'players-container';
                
                // Reset all player states
                resetPlayerStates();
            }

            // Reset all player visual states
            function resetPlayerStates() {
                for (let i = 1; i <= 4; i++) {
                    const playerElement = document.getElementById(`player${i}`);
                    if (playerElement) {
                        playerElement.classList.remove('active');
                        playerElement.querySelector('.score').textContent = '0';
                    }
                }
            }

            // Initialize the game
            function initGame() {
                createPlayerElements();
                
                // Load player names from localStorage
                for (let i = 1; i <= 4; i++) {
                    const savedName = localStorage.getItem(`player${i}Name`);
                    const nameElement = document.getElementById(`player${i}Name`);
                    if (savedName && nameElement) {
                        nameElement.value = savedName;
                    }
                }
                
                // Set up category selection
                categoryElements.forEach(category => {
                    category.addEventListener('click', function() {
                        categoryElements.forEach(c => c.classList.remove('selected'));
                        this.classList.add('selected');
                        selectedCategory = this.getAttribute('data-category');
                        selectedCategoryElement.textContent = selectedCategory.charAt(0).toUpperCase() + selectedCategory.slice(1);
                        startBtn.disabled = false;
                    });
                });
                
                // Set up player count change listener
                playerCountSelect.addEventListener('change', createPlayerElements);
            }

            // Function to start the game
            function startGame() {
                if (!selectedCategory) {
                    alert('Please select a category to start the game.');
                    return;
                }
                
                startBtn.disabled = true;
                startBtn.textContent = "Loading Images...";
                
                const categoryImageUrls = CATEGORIES[selectedCategory];
                availableImages = categoryImageUrls.map(url => {
                    const urlParts = url.split('/');
                    let filename = urlParts[urlParts.length - 1];
                    filename = filename.replace(/\.[^/.]+$/, "");
                    
                    return {
                        name: filename,
                        url: url
                    };
                });
                
                if (availableImages.length < 2) {
                    alert('Selected category has less than 2 images. Please add more images to this category.');
                    startBtn.disabled = false;
                    startBtn.textContent = "Start Game";
                    return;
                }
                
                preloadImages(categoryImageUrls, () => {
                    startBtn.textContent = "Start Game";
                    
                    // Save player names and update total players
                    totalPlayers = parseInt(playerCountSelect.value);
                    for (let i = 1; i <= totalPlayers; i++) {
                        const nameElement = document.getElementById(`player${i}Name`);
                        if (nameElement) {
                            localStorage.setItem(`player${i}Name`, nameElement.value);
                            playerNames[i] = nameElement.value;
                        }
                    }
                    
                    gameActive = true;
                    gamePaused = false;
                    
                    // Initialize player times and scores
                    const initialTime = parseFloat(initialTimeInput.value);
                    for (let i = 1; i <= 4; i++) {
                        playerScores[i] = 0;
                        playerTimes[i] = initialTime;
                    }
                    
                    currentPlayer = 1;
                    usedImages = [];
                    
                    // Update UI for all players
                    for (let i = 1; i <= totalPlayers; i++) {
                        const playerElement = document.getElementById(`player${i}`);
                        if (playerElement) {
                            playerElement.querySelector('.score').textContent = "0";
                            playerElement.querySelector('.time-bank').textContent = `Time: ${initialTime.toFixed(1)}s`;
                        }
                    }
                    
                    resetPlayerStates();
                    document.getElementById('player1').classList.add('active');
                    
                    correctBtn.disabled = false;
                    passBtn.disabled = false;
                    pauseBtn.disabled = false;
                    endGameBtn.disabled = false;
                    pauseBtn.textContent = "Pause";
                    pauseBtn.classList.remove("paused");
                    startBtn.disabled = true;
                    initialTimeInput.disabled = true;
                    passPenaltyInput.disabled = true;
                    playerCountSelect.disabled = true;
                    
                    // Disable all name inputs
                    for (let i = 1; i <= totalPlayers; i++) {
                        const nameElement = document.getElementById(`player${i}Name`);
                        if (nameElement) nameElement.disabled = true;
                    }
                    
                    categoryElements.forEach(category => {
                        category.style.pointerEvents = 'none';
                    });
                    
                    answerDisplayElement.textContent = "";
                    answerDisplayElement.className = "answer-display";
                    
                    nextImage();
                    
                    lastTimerUpdate = Date.now();
                    startTimer();
                });
            }

            // Function to handle next image
            function nextImage() {
                const wasPaused = gamePaused;
                if (!wasPaused) {
                    gamePaused = true;
                    stopTimer();
                }
                
                const unusedImages = availableImages.filter((img, index) => !usedImages.includes(index));
                
                if (unusedImages.length === 0) {
                    endGame("All images have been used!");
                    return;
                }
                
                const randomIndex = Math.floor(Math.random() * unusedImages.length);
                const selectedImageIndex = availableImages.indexOf(unusedImages[randomIndex]);
                currentImage = availableImages[selectedImageIndex];
                usedImages.push(selectedImageIndex);
                
                const newImage = new Image();
                newImage.onload = () => {
                    currentImageElement.src = currentImage.url;
                    if (!wasPaused) {
                        gamePaused = false;
                        lastTimerUpdate = Date.now();
                        startTimer();
                    }
                };
                newImage.onerror = () => {
                    currentImageElement.src = currentImage.url;
                    if (!wasPaused) {
                        gamePaused = false;
                        lastTimerUpdate = Date.now();
                        startTimer();
                    }
                };
                newImage.src = currentImage.url;
            }

            // Function to start the timer for the current player
            function startTimer() {
                if (timerInterval) {
                    clearInterval(timerInterval);
                }
                
                timerInterval = setInterval(() => {
                    if (!gameActive || gamePaused) return;
                    
                    const now = Date.now();
                    const delta = (now - lastTimerUpdate) / 1000;
                    lastTimerUpdate = now;
                    
                    playerTimes[currentPlayer] -= delta;
                    const playerElement = document.getElementById(`player${currentPlayer}`);
                    if (playerElement) {
                        playerElement.querySelector('.time-bank').textContent = `Time: ${Math.max(0, playerTimes[currentPlayer]).toFixed(1)}s`;
                    }
                    
                    if (playerTimes[currentPlayer] <= 0) {
                        endGame(`${playerNames[currentPlayer]} ran out of time!`);
                    }
                }, 100);
            }

            // Function to stop the timer
            function stopTimer() {
                if (timerInterval) {
                    clearInterval(timerInterval);
                    timerInterval = null;
                }
            }

            // Function to toggle pause state
            function togglePause() {
                if (!gameActive) return;
                
                gamePaused = !gamePaused;
                
                if (gamePaused) {
                    stopTimer();
                    pauseBtn.textContent = "Resume";
                    pauseBtn.classList.add("paused");
                    correctBtn.disabled = true;
                    passBtn.disabled = true;
                } else {
                    lastTimerUpdate = Date.now();
                    startTimer();
                    pauseBtn.textContent = "Pause";
                    pauseBtn.classList.remove("paused");
                    correctBtn.disabled = false;
                    passBtn.disabled = false;
                }
            }

            // Function to switch to next player
            function switchPlayer() {
                // Remove active class from current player
                document.getElementById(`player${currentPlayer}`).classList.remove('active');
                
                // Move to next player (loop back to 1 after last player)
                currentPlayer = currentPlayer % totalPlayers + 1;
                
                // Add active class to new current player
                document.getElementById(`player${currentPlayer}`).classList.add('active');
                
                // Update all time displays
                for (let i = 1; i <= totalPlayers; i++) {
                    const playerElement = document.getElementById(`player${i}`);
                    if (playerElement) {
                        playerElement.querySelector('.time-bank').textContent = `Time: ${playerTimes[i].toFixed(1)}s`;
                    }
                }
            }

            // Function to display answer
            function displayAnswer(isCorrect) {
                stopTimer();
                
                answerDisplayElement.textContent = `Correct answer: ${currentImage.name}`;
                answerDisplayElement.className = isCorrect ? 
                    "answer-display correct-answer" : "answer-display pass-answer";
                
                if (answerTimeout) {
                    clearTimeout(answerTimeout);
                }
                
                correctBtn.disabled = true;
                passBtn.disabled = true;
                pauseBtn.disabled = true;
                endGameBtn.disabled = true;
                
                answerTimeout = setTimeout(() => {
                    answerDisplayElement.textContent = "";
                    answerDisplayElement.className = "answer-display";
                    
                    const unusedImages = availableImages.filter((img, index) => !usedImages.includes(index));
                    if (unusedImages.length === 0) {
                        endGame("All images have been used!");
                        return;
                    }
                    
                    lastTimerUpdate = Date.now();
                    
                    if (isCorrect) {
                        switchPlayer();
                        nextImage();
                    } else {
                        nextImage();
                    }
                    
                    correctBtn.disabled = false;
                    passBtn.disabled = false;
                    pauseBtn.disabled = false;
                    endGameBtn.disabled = false;
                    startTimer();
                }, 2000);
            }

            // Function to handle correct answer
            function handleCorrect() {
                if (!gameActive || gamePaused) return;
                
                playerScores[currentPlayer]++;
                document.getElementById(`player${currentPlayer}`).querySelector('.score').textContent = playerScores[currentPlayer];
                
                displayAnswer(true);
            }

            // Function to handle pass
            function handlePass() {
                if (!gameActive || gamePaused) return;
                
                const penalty = parseFloat(passPenaltyInput.value);
                playerTimes[currentPlayer] -= penalty;
                
                const playerElement = document.getElementById(`player${currentPlayer}`);
                if (playerElement) {
                    playerElement.querySelector('.time-bank').textContent = `Time: ${playerTimes[currentPlayer].toFixed(1)}s`;
                }
                
                if (playerTimes[currentPlayer] <= 0) {
                    endGame(`${playerNames[currentPlayer]} ran out of time!`);
                    return;
                }
                
                displayAnswer(false);
            }

            // Function to end the game
            function endGame(reason = "") {
                gameActive = false;
                gamePaused = false;
                stopTimer();
                if (answerTimeout) {
                    clearTimeout(answerTimeout);
                }
                
                if (currentImage) {
                    answerDisplayElement.textContent = `Final Answer: ${currentImage.name}`;
                    answerDisplayElement.className = "answer-display correct-answer";
                }
                
                correctBtn.disabled = true;
                passBtn.disabled = true;
                pauseBtn.disabled = true;
                startBtn.disabled = false;
                endGameBtn.disabled = true;
                initialTimeInput.disabled = false;
                passPenaltyInput.disabled = false;
                playerCountSelect.disabled = false;
                
                for (let i = 1; i <= totalPlayers; i++) {
                    const nameElement = document.getElementById(`player${i}Name`);
                    if (nameElement) nameElement.disabled = false;
                }
                
                categoryElements.forEach(category => {
                    category.style.pointerEvents = 'auto';
                });
                
                // Determine winner
                let maxScore = -1;
                let winners = [];
                let maxTime = -1;
                let timeWinners = [];
                
                for (let i = 1; i <= totalPlayers; i++) {
                    if (playerScores[i] > maxScore) {
                        maxScore = playerScores[i];
                        winners = [i];
                    } else if (playerScores[i] === maxScore) {
                        winners.push(i);
                    }
                }
                
                let winnerMessage = "";
                if (winners.length === 1) {
                    winnerMessage = `${playerNames[winners[0]]} wins!`;
                } else {
                    // Tie-breaker: most time left
                    for (let i of winners) {
                        if (playerTimes[i] > maxTime) {
                            maxTime = playerTimes[i];
                            timeWinners = [i];
                        } else if (playerTimes[i] === maxTime) {
                            timeWinners.push(i);
                        }
                    }
                    
                    if (timeWinners.length === 1) {
                        winnerMessage = `${playerNames[timeWinners[0]]} wins (tie but more time left)!`;
                    } else {
                        winnerMessage = "It's a tie!";
                    }
                }
                
                if (reason) {
                    winnerMessage = `${reason} ${winnerMessage}`;
                }
                
                // Build score summary
                let scoreSummary = "Final Scores: ";
                for (let i = 1; i <= totalPlayers; i++) {
                    scoreSummary += `${playerNames[i]}: ${playerScores[i]}`;
                    if (i < totalPlayers) scoreSummary += " - ";
                }
                
                winnerMessageElement.textContent = `${winnerMessage} ${scoreSummary}`;
                gameOverElement.style.display = 'block';
                gameOverElement.scrollIntoView({ behavior: 'smooth', block: 'nearest' });
            }

            // Function to handle ending the game prematurely
            function endGamePrematurely() {
                if (!gameActive) return;
                
                answerDisplayElement.textContent = `Answer: ${currentImage.name}`;
                answerDisplayElement.className = "answer-display correct-answer";
                
                endGame("Game ended prematurely.");
            }

            // Function to preload images
            function preloadImages(imageUrls, callback) {
                let loaded = 0;
                const total = imageUrls.length;
                
                if (total === 0) {
                    callback();
                    return;
                }
                
                imageUrls.forEach(url => {
                    const img = new Image();
                    img.onload = () => {
                        loaded++;
                        if (loaded === total) {
                            callback();
                        }
                    };
                    img.onerror = () => {
                        loaded++;
                        if (loaded === total) {
                            callback();
                        }
                    };
                    img.src = url;
                });
            }

            // Initialize the game
            initGame();
            
            // Event listeners
            startBtn.addEventListener('click', startGame);
            restartBtn.addEventListener('click', startGame);
            correctBtn.addEventListener('click', handleCorrect);
            passBtn.addEventListener('click', handlePass);
            pauseBtn.addEventListener('click', togglePause);
            endGameBtn.addEventListener('click', endGamePrematurely);
            toggleBtn.addEventListener('click', toggleCategories);
            
            // Keyboard shortcuts
            document.addEventListener('keydown', function(e) {
                if (!gameActive || endGameBtn.disabled) return; 
                if (correctBtn.disabled) return;
                
                if (e.key === 'ArrowLeft') {
                    handleCorrect();
                    correctBtn.style.transform = 'scale(0.95)';
                    setTimeout(() => {
                        correctBtn.style.transform = '';
                    }, 100);
                } else if (e.key === 'ArrowRight') {
                    handlePass();
                    passBtn.style.transform = 'scale(0.95)';
                    setTimeout(() => {
                        passBtn.style.transform = '';
                    }, 100);
                } else if (e.key === 'p' || e.key === 'P') {
                    togglePause();
                    pauseBtn.style.transform = 'scale(0.95)';
                    setTimeout(() => {
                        pauseBtn.style.transform = '';
                    }, 100);
                } else if (e.key === 'x' || e.key === 'X') {
                    endGamePrematurely();
                    endGameBtn.style.transform = 'scale(0.95)';
                    setTimeout(() => {
                        endGameBtn.style.transform = '';
                    }, 100);
                }
            });
        });
    </script>
</body>
</html>
