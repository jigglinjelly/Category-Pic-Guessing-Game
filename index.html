<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Multi-Category Image Guessing Game</title>
    <style>
         * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        body {
            background: linear-gradient(135deg, #6a11cb 0%, #2575fc 100%);
            min-height: 100vh;
            display: flex;
            color: #333;
            overflow: hidden;
        }

        .container {
            display: flex;
            width: 100%;
            height: 100vh;
            gap: 0;
        }

        /* Main Game Area */
        .main-game-area {
            flex: 3;
            display: flex;
            flex-direction: column;
            background: white;
            overflow: hidden;
        }

        .header {
            text-align: center;
            padding: 15px;
            background: linear-gradient(135deg, #6a11cb 0%, #2575fc 100%);
            color: white;
            flex-shrink: 0;
        }

        .header h1 {
            font-size: 2rem;
            margin-bottom: 5px;
        }

        .header p {
            font-size: 1rem;
            opacity: 0.9;
        }

         .image-container {
            flex: 1;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 20px;
            background: #000;
            overflow: hidden;
            position: relative;
        }
        .answer-overlay {
            position: absolute;
            bottom: 50%;
            left: 0;
            width: 100%;
            padding: 45px 50px;
            background: rgba(0, 0, 0, 0.85);
            color: white;
            font-size: 1.8rem;
            font-weight: bold;
            text-align: center;
            z-index: 10;
            opacity: 0;
            visibility: hidden;
            transition: opacity 0.3s ease, visibility 0.3s ease;
            backdrop-filter: blur(3px);
            border-top: 3px solid transparent;
        }

        .answer-overlay.visible {
            opacity: 1;
            visibility: visible;
        }

        .answer-overlay.correct {
            background: rgba(46, 125, 50, 0.9); /* Green for correct */
        }

        .answer-overlay.pass {
            background: rgba(198, 40, 40, 0.9); /* Red for pass */
        }

        /* Hide the original answer display */
        .answer-display {
            display: none;
        }

        #currentImage {
            max-width: 100%;
            max-height: 100%;
            width: auto;
            height: auto;
            object-fit: contain; /* This ensures no cropping */
            transition: opacity 0.3s ease;
            display: flex;
            flex: 1;
            /* Force scaling for small images
            min-width: 500px;
            min-height: 500px;*/
        }
        /*.answer-display {
            padding: 15px;
            text-align: center;
            font-size: 1.5rem;
            font-weight: bold;
            min-height: 60px;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
            flex-shrink: 0;
        }*/

        .correct-answer {
            background: #e8f5e9;
            color: #2e7d32;
        }

        .pass-answer {
            background: #ffebee;
            color: #c62828;
        }

        /* Sidebar */
        .sidebar {
            flex: 1;
            min-width: 400px;
            display: flex;
            flex-direction: column;
            background: #f8f9fa;
            overflow: hidden;
        }

        .sidebar-content {
            flex: 1;
            display: flex;
            flex-direction: column;
            overflow: hidden;
        }

        .sidebar-scrollable-top {
            flex: 0 0 auto; /* Don't grow, fixed height */
            overflow-y: auto;
            overflow-x: hidden;
            padding: 20px;
            display: flex;
            flex-direction: column;
            gap: 20px;
            max-height: 45vh; /* Limit height for top section */
            border-bottom: 2px solid #e9ecef;
        }

        .sidebar-scrollable-bottom {
            flex: 1; /* Take remaining space */
            overflow-y: auto;
            padding: 20px;
            display: flex;
            flex-direction: column;
            gap: 20px;
        }


        .sidebar-section {
            background: white;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
            padding: 20px;
        }

        .sidebar-section h3 {
            color: #2c3e50;
            margin-bottom: 15px;
            font-size: 1.2rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        /* Players Section */
        .players-container {
            display: grid;
            gap: 12px;
            width: 100%;     /*  Keep inside parent */    
            max-width: 100%; /* Prevent grid expansion */
        }

        .players-container.two-players {
            grid-template-columns: 1fr;
        }

        .players-container.three-players {
            grid-template-columns: 1fr 1fr;
        }

        .players-container.four-players {
            grid-template-columns: 1fr 1fr;
            grid-template-rows: 1fr 1fr;
        }

        .player {
            padding: 10px;
            border-radius: 8px;
            background: #f8f9fa;
            transition: all 0.3s ease;
            border: 2px solid transparent;
            text-align: center;
            min-height: 70px; /* Fixed minimum height */
        }

        .player.active {
            background: #e3f2fd;
            border-color: #2196f3;
            box-shadow: 0 3px 10px rgba(33, 150, 243, 0.3);
            transform: scale(1.02);
        }

        .player h2 {
            font-size: 0.9rem;
            margin-bottom: 8px;
            color: #2c3e50;
        }

        .player-name {
            border: none;
            background: transparent;
            font-size: 0.85rem;
            text-align: center;
            width: 100%;
            padding: 5px;
            border-radius: 4px;
            border: 1px solid #ddd;
            margin-bottom: 8px;
        }

        .player-name:focus {
            outline: none;
            background: rgba(255, 255, 255, 0.8);
            box-shadow: 0 0 0 2px #2196f3;
        }

        .score {
            font-size: 1.3rem;
            font-weight: bold;
            color: #2196f3;
        }

        .time-bank {
            font-size: 0.8rem;
            color: #e74c3c;
            margin-top: 5px;
        }

        /* Controls */
        .controls {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 10px;
        }

        button {
            padding: 12px 15px;
            font-size: 1rem;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: bold;
            box-shadow: 0 3px 8px rgba(0, 0, 0, 0.1);
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 6px;
        }

        button:disabled {
            opacity: 0.6;
            cursor: not-allowed;
            transform: none !important;
        }

        .key-shortcut {
            background: #555;
            color: white;
            border-radius: 4px;
            padding: 2px 6px;
            font-size: 0.8rem;
            font-weight: normal;
        }

        #correctBtn {
            background: #4caf50;
            color: white;
        }

        #correctBtn:hover:not(:disabled) {
            background: #388e3c;
            transform: translateY(-1px);
        }

        #passBtn {
            background: #f44336;
            color: white;
        }

        #passBtn:hover:not(:disabled) {
            background: #d32f2f;
            transform: translateY(-1px);
        }

        #pauseBtn {
            background: #ff9800;
            color: white;
        }

        #pauseBtn:hover:not(:disabled) {
            background: #f57c00;
            transform: translateY(-1px);
        }

        #pauseBtn.paused {
            background: #2196f3;
        }

        #pauseBtn.paused:hover:not(:disabled) {
            background: #1976d2;
        }

        #startBtn {
            background: #2196f3;
            color: white;
            grid-column: 1 / -1;
        }

        #startBtn:hover {
            background: #1976d2;
            transform: translateY(-1px);
        }

        #endGameBtn {
            background: #9c27b0;
            color: white;
            grid-column: 1 / -1;
        }

        #endGameBtn:hover:not(:disabled) {
            background: #7b1fa2;
            transform: translateY(-1px);
        }

        /* Settings */
        .settings label {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin: 8px 0;
            padding: 6px 0;
        }

        .settings input, .settings select {
            padding: 6px;
            width: 70px;
            border: 1px solid #ddd;
            border-radius: 4px;
        }

        /* Categories */
        .toggle-btn {
            background: #2196f3;
            color: white;
            border: none;
            padding: 4px 8px;
            border-radius: 4px;
            cursor: pointer;
            font-size: 0.7rem;
        }

        .toggle-btn:hover {
            background: #1976d2;
        }

        .categories.hidden {
            display: none;
        }

        .categories {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 8px;
            margin-bottom: 12px;
        }

        .category {
            padding: 10px;
            background: white;
            border-radius: 6px;
            border: 2px solid #ff9800;
            cursor: pointer;
            transition: all 0.3s ease;
            text-align: center;
        }

        .category:hover {
            transform: translateY(-1px);
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
        }

        .category.selected {
            background: #ff9800;
            color: white;
        }

        .category h4 {
            margin-bottom: 3px;
            color: #2c3e50;
            font-size: 0.8rem;
        }

        .category.selected h4 {
            color: white;
        }

        .category p {
            font-size: 0.7rem;
            color: #666;
            display: none;
        }

        .category.selected p {
            color: #f0f0f0;
            display: block;
        }

        /* Instructions */
        .instructions ul {
            list-style-type: none;
            padding-left: 0;
            margin-bottom: 12px;
        }

        .instructions li {
            margin-bottom: 6px;
            position: relative;
            padding-left: 18px;
            font-size: 0.85rem;
            line-height: 1.3;
        }

        .instructions li:before {
            content: "•";
            color: #2196f3;
            font-weight: bold;
            position: absolute;
            left: 0;
        }

        .instructions code {
            background: #f5f5f5;
            padding: 1px 3px;
            border-radius: 3px;
            font-family: monospace;
            font-size: 0.75rem;
        }

        /* Game Over */
        .game-over {
            text-align: center;
            padding: 20px;
            background: #fff8e1;
            border-radius: 10px;
            margin-top: 10px;
            display: none;
        }

        .game-over h2 {
            color: #f57c00;
            margin-bottom: 12px;
            font-size: 1.3rem;
        }

        /* Keyboard Hint */
        .keyboard-hint {
            text-align: center;
            padding: 8px;
            background: #f8f9fa;
            border-radius: 6px;
            margin: 0 15px 15px;
            font-size: 0.8rem;
            color: #666;
            flex-shrink: 0;
        }

        /* Responsive */
        @media (max-width: 1400px) {
            .container {
                flex-direction: column;
                height: auto;
                min-height: 100vh;
            }
            
            .main-game-area {
                height: 70vh;
            }
            
            .sidebar {
                min-width: auto;
                height: 30vh;
            }
            
            .sidebar-content {
                flex-direction: row;
            }
            
            .sidebar-scrollable-top {
                max-height: 30vh; /* Smaller on mobile */
                max-width: 50%;
            }
        }

        @media (max-width: 768px) {
            .container {
                padding: 0;
            }
            
            .header h1 {
                font-size: 1.5rem;
            }
            
            .header p {
                font-size: 0.9rem;
            }
            
            .sidebar-content {
                flex-direction: column;
            }
            
            .sidebar-scrollable-top {
                max-height: 25vh; /* Even smaller on very small screens */
                max-width: 50%;
            }
            
            .players-container.three-players,
            .players-container.four-players {
                grid-template-columns: 1fr 1fr;
            }
            
            .categories {
                grid-template-columns: 1fr;
            }
            .player {
                min-width: 0; /*  Prevent children from forcing grid wider */
            }
        }
    </style>
</head>

<body>
    <div class="container">
        <!-- Main Game Area -->
        <div class="main-game-area">
            <div class="header">
                <h1>Multi-Category Image Guessing Game</h1>
                <p>Choose from different image categories for each round of the game</p>
            </div>
            
            <div class="image-container">
                <img id="currentImage" src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='1920' height='1080' viewBox='0 0 1920 1080'%3E%3Crect width='1920' height='1080' fill='%23000'/%3E%3Ctext x='50%25' y='50%25' dominant-baseline='middle' text-anchor='middle' font-family='sans-serif' font-size='36' fill='%23555'%3ESelect a category to start%3C/text%3E%3C/svg%3E">
                <div class="answer-overlay" id="answerOverlay"></div>
            </div>
            
            <div class="answer-display" id="answerDisplay"></div>
            
            <div class="keyboard-hint">
                Use keyboard shortcuts: → for Correct, P for Pause, ← for Pass, x for End Game
            </div>
        </div>

        <!-- Sidebar -->
        <div class="sidebar">
            <!-- Replace the entire sidebar-content section with this code -->
            <div class="sidebar-content">
                <!-- First Scrollable Section: Players and Settings -->
                <div class="sidebar-scrollable-top">
                    <!-- Players Section -->
                    <div class="sidebar-section">
                        <h3>Players</h3>
                        <div class="players-container two-players" id="playersContainer">
                            <div class="player" id="player1">
                                <input type="text" class="player-name" id="player1Name" value="Player 1" maxlength="12">
                                <div class="score">0</div>
                                <div class="time-bank">Time: 150.0s</div>
                            </div>
                            <div class="player" id="player2">
                                <input type="text" class="player-name" id="player2Name" value="Player 2" maxlength="12">
                                <div class="score">0</div>
                                <div class="time-bank">Time: 150.0s</div>
                            </div>
                        </div>
                    </div>

                    
                </div>

                <!-- Second Scrollable Section: Controls and Everything Else -->
                <div class="sidebar-scrollable-bottom">
                    <!-- Game Controls -->
                    <div class="sidebar-section">
                        <h3>Game Controls</h3>
                        <div class="controls">
                            <button id="passBtn">
                                <span class="key-shortcut">←</span>
                                Pass
                            </button>
                            <button id="correctBtn">
                                <span class="key-shortcut">→</span>
                                Correct!
                            </button>
                            <button id="pauseBtn">
                                <span class="key-shortcut">P</span>
                                Pause
                            </button>
                            <button id="startBtn">Start Game</button>
                            <button id="endGameBtn">
                                <span class="key-shortcut">X</span>
                                End Game
                            </button>
                        </div>
                    </div>
                    <!-- Settings -->
                    <div class="sidebar-section settings">
                        <h3>Game Settings</h3>
                        <label>
                            Players:
                            <select id="playerCount">
                                <option value="2">2 Players</option>
                                <option value="3">3 Players</option>
                                <option value="4">4 Players</option>
                            </select>
                        </label>
                        <label>
                            Time (s):
                            <input type="number" id="initialTime" value="150" min="10" max="300">
                        </label>
                        <label>
                            Penalty (s):
                            <input type="number" id="passPenalty" value="10" min="0" max="30">
                        </label>
                    </div>
                    <!-- Category Selection -->
                    <div class="sidebar-section">
                        <h3>Image Category
                            <button id="toggleCategories" class="toggle-btn">Hide</button>
                        </h3>
                        <div class="categories">
                            <div class="category" data-category="ATT">
                                <h4>ATT</h4>
                                <p>Attractions</p>
                            </div>
                            <div class="category" data-category="MPP">
                                <h4>MPP</h4>
                                <p>Meet-the-People</p>
                            </div>
                            <div class="category" data-category="SGM">
                                <h4>SGM</h4>
                                <p>Mallwalker</p>
                            </div>
                            <div class="category" data-category="HKF">
                                <h4>HKF</h4>
                                <p>Hawker Fare</p>
                            </div>
                            <div class="category" data-category="KNP">
                                <h4>KNP</h4>
                                <p>Snacks & Pastries</p>
                            </div>
                            <div class="category" data-category="DST">
                                <h4>DST</h4>
                                <p>Just Desserts</p>
                            </div>
                            <div class="category" data-category="DSS">
                                <h4>DSS</h4>
                                <p>Dim Sum Stall</p>
                            </div>
                            <div class="category" data-category="MAS">
                                <h4>MAS</h4>
                                <p>SG Mascots</p>
                            </div>
                            <div class="category" data-category="PACS">
                                <h4>PACS</h4>
                                <p>Arts & Clubs</p>
                            </div>
                            <div class="category" data-category="UGSP">
                                <h4>UGSP</h4>
                                <p>UGs & Sports</p>
                            </div>            
                        </div>
                        <p style="text-align: center; margin-top: 10px; font-weight: bold;">
                            Selected: <span id="selectedCategory">None</span>
                        </p>
                    </div>
                    <!-- Game Rules -->
                    <div class="sidebar-section instructions">
                        <h3>Game Rules</h3>
                        <ul>
                            <li>Players take turns guessing what's shown in the picture</li>
                            <li>The answer is the filename of the image (without extension)</li>
                            <li>Click "Correct!" to get 1 point and show the correct answer (green)</li>
                            <li>Click "Pass" to skip the image, show the answer (red) and deduct time</li>
                            <li>Each player has an individual time bank - game ends when time runs out</li>
                            <li>Time only decreases during guessing, not when answers are shown</li>
                            <li>Images won't repeat during the same game</li>
                            <li>Game ends when either time runs out or all images are used</li>
                            <li>Press P or click Pause button to pause/resume the game</li>
                        </ul>
                    </div>

                    <!-- Game Over Section -->
                    <div class="game-over" id="gameOver">
                        <h2>Game Over!</h2>
                        <p id="winnerMessage"></p>
                        <button id="restartBtn">Play Again</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Define your image categories here
        const CATEGORIES = {
            ATT: [
                "Adventure Cove Waterpark.jpg",
                "ArtScience Museum.jpg",
                "Bird Paradise.jpg",
                "Botanic Gardens.jpg",
                "Buddha Tooth Relic Temple.jpg",
                "CHIJMES.jpeg",
                "Chinatown.jpg",
                "Chinese Garden.jpg",
                "Civilian War Memorial.jpg",
                "Cloud Forest.jpg",
                "Esplanade.jpg",
                "Flower Dome.jpg",
                "Fort Canning Park.jpg",
                "Fort Siloso.jpg",
                "Fountain of Wealth.jpg",
                "Gardens By The Bay.jpg",
                "Haji Lane.jpg",
                "Haw Par Villa.jpg",
                "Helix Bridge.jpg",
                "Japanese Garden.jpg",
                "Jewel Changi.jpg",
                "Lau Pa Sat.jpg",
                "Marina Bay Sands.jpg",
                "Merlion.jpg",
                "National Gallery.jpg",
                "National Museum of Singapore.jpg",
                "Night Safari.jpg",
                "River Wonders.jpg",
                "Science Centre.jpg",
                "Sentosa Island.jpg",
                "Singapore Flyer.jpg",
                "Singapore Oceanarium.jpg",
                "Singapore Zoo.jpg",
                "SkyHelix Sentosa.jpg",
                "Snow City.jpg",
                "Sultan Mosque or Kampong Glam or Arab Street.jpg",
                "Universal Studios Singapore.jpg",
                "Wild Wild Wet @ Downtown East.jpg"
            ].map(filename => `https://raw.githubusercontent.com/jigglinjelly/Category-Pic-Guessing-Game/main/images/ATT/${filename}`),
            MPP: [
                "Amy Khor.jpg",
                "Baey Yam Keng.jpg",
                "Chan Chun Sing.jpg",
                "Chee Hong Tat.jpg",
                "Darryl David.jpg",
                "Denise Phua.jpg",
                "Desmond Lee.jpg",
                "Edwin Tong.jpg",
                "Gan Kim Yong.png",
                "Goh Chok Tong.jpg",
                "Goh Meng Seng.jpg",
                "Grace Fu.jpg",
                "Heng Swee Keat.jpg",
                "Jamus Lim.jpg",
                "Jeffrey Siow.jpg",
                "Josephine Teo.jpg",
                "K Shanmugam.jpg",
                "Koh Poh Koon.jpg",
                "Lawrence Wong.jpg",
                "Lee Hsien Loong.JPG",
                "Leon Perera.jpg",
                "Low Thia Khiang.jpg",
                "Low Yen Ling.jpg",
                "Masagos Zulkifli Bin Masagos Mohamad.jpg",
                "Ng Chee Meng.jpg",
                "Ng Eng Hen.jpg",
                "Nicole Seah.jpg",
                "Ong Ye Kung.jpg",
                "Pritam Singh.jpg",
                "Seah Kian Peng.jpg",
                "Sun Xueling.jpg",
                "Sylvia Lim.jpg",
                "Tan Chuan Jin.jpg",
                "Tan See Leng.jpg",
                "Teo Chee Hean.jpg",
                "Tin Pei Ling.jpg",
                "Vivian Balakrishnan.jpg"
            ].map(filename => `https://raw.githubusercontent.com/jigglinjelly/Category-Pic-Guessing-Game/main/images/MPP/${filename}`),    
            SGM: [
                "313@Somerset.jpg",
                "Bugis Junction.jpg",
                "Bugis Street.jpg",
                "Bugis+.jpg",
                "Centrepoint.jpg",
                "Clarke Quay Central.jpg",
                "Funan.jpg",
                "Hillion Mall.jpg",
                "ION Orchard.jpg",
                "Jem.jpg",
                "Jewel.jpg",
                "Junction 8.jpg",
                "Jurong Point.jpg",
                "Lot One.jpg",
                "Lucky Plaza.jpg",
                "Marina Square.jpg",
                "Mustafa Centre.jpg",
                "NEX.jpg",
                "Ngee Ann City.jpg",
                "Orchard Central Orchard Gateway.jpg",
                "Plaza Singapura.jpg",
                "Raffles City.jpg",
                "SingPost Centre.jpg",
                "Star Vista.jpg",
                "Suntec City.jpg",
                "Tampines Mall.jpg",
                "Tang Plaza.jpg",
                "The Cathay.jpg",
                "The Shoppes at Marina Bay Sands.jpg",
                "Vivocity.jpg",
                "Westgate.jpg"
            ].map(filename => `https://raw.githubusercontent.com/jigglinjelly/Category-Pic-Guessing-Game/main/images/SGM/${filename}`), 
            HKF: [
                "Bak Chor Mee.png",
                "Bakuteh.png",
                "Ban Mian.jpg",
                "Briyani.png",
                "Char Kway Teow.png",
                "Chicken Rice.png",
                "Chilli Crab.png",
                "Duck Rice.jpg",
                "Fishball Noodles.jpg",
                "Fish Soup Beehoon.png",
                "Fried Carrot Cake.png",
                "Har Cheong Gai.jpg",
                "Hokkien Mee.jpg",
                "Indian Rojak.jpg",
                "Kway Chap.jpg",
                "Laksa.jpg",
                "Lor Mee.png",
                "Mala Xiang Guo.jpg",
                "Mee Hoon Kueh.jpg",
                "Mee Reebus.png",
                "Mee Siam.png",
                "Mee Soto.jpg",
                "Mutton Soup.jpg",
                "Nasi Lemak.jpg",
                "Oyster Omelette.jpg",
                "Pig Organ Soup.jpg",
                "Popiah.png",
                "Prawn Noodle.png",
                "Raw Fish 鱼生.jpg",
                "Rojak.png",
                "Roti Prata.png",
                "Satay.jpg",
                "Teochew Porridge.jpg",
                "Thosai.jpg",
                "Thunder Tea Rice.png",
                "Wanton Mee.png",
                "Yong Tau Foo.png"
            ].map(filename => `https://raw.githubusercontent.com/jigglinjelly/Category-Pic-Guessing-Game/main/images/HKF/${filename}`), 
            KNP: [
                "Ang Ku Kueh.png",
                "Banana Cake.jpg",
                "Butterfly Fritters.png",
                "Chwee Kueh.png",
                "Coffee Bun or Rotiboy.jpg",
                "Curry Puff.png",
                "Gem Biscuits.jpg",
                "Glutinous Rice Dumplings or Zong Zi.png",
                "Ham Chim Peng.png",
                "Huat Kueh.png",
                "Kaya Toast.png",
                "Kek Lapis.png",
                "Kueh Bahulu.png",
                "Kueh Bangkit.png",
                "Kueh Lapis 九层糕.png",
                "Kueh Pie Tee.png",
                "Kueh Salat.png",
                "Min Chiang Kueh.png",
                "Mooncake.png",
                "Muah Chee.jpg",
                "Muruku.jpg",
                "Ngoh Hiang.png",
                "Ondeh Ondeh.png",
                "Oyster Puff.jpg",
                "Pandan Chiffon Cake.png",
                "Png Kueh.png",
                "Pork Floss Bun.jpg",
                "Putu Piring.png",
                "Samosa.jpg",
                "Teochew Mooncake.png",
                "Tutu Kueh.png",
                "Vadai.png",
                "You Tiao.png"
            ].map(filename => `https://raw.githubusercontent.com/jigglinjelly/Category-Pic-Guessing-Game/main/images/KNP/${filename}`), 
            DST: [
                "Almond Cream 杏仁糊.jpg",
                "Black Sesame Paste 芝麻糊.jpg",
                "Bobo Cha Cha.jpg",
                "Chendol.jpg",
                "Cheng Tng.jpg",
                "Chocolate Tissue Prata.jpg",
                "Durian Pengat.jpg",
                "Glutinous Rice Balls or Tang Yuan.jpg",
                "Green Bean Soup.jpg",
                "Ice Aiyu Jelly 文頭雪.jpg",
                "Ice Cream Sandwich.jpg",
                "Ice Kachang.jpg",
                "Iced Soursop.jpg",
                "Milo Dinosaur.jpg",
                "Osmanthus Jelly 桂花糕.jpg",
                "Patbingsu.jpg",
                "Pulut Hitam 黑糯米.jpg",
                "Red Bean Soup.jpg",
                "Sea Coconut w Longan.jpg",
                "Soya Beancurd Tao Huay.jpg",
                "Soya Pudding.jpg",
                "Steamed Milk 炖鲜奶.jpg",
                "Tau Suan.jpg",
                "Walnut Paste 核桃糊.jpg",
                "Yam Paste 芋泥.jpg"
            ].map(filename => `https://raw.githubusercontent.com/jigglinjelly/Category-Pic-Guessing-Game/main/images/DST/${filename}`), 
            DSS: [
                "Beancurd Roll.jpg",
                "Big Bao 大包.jpg",
                "Carrot Cake.jpg",
                "Century Egg Congee or Porridge.jpg",
                "Char Siew Bao.jpg",
                "Chee Cheong Fun.jpg",
                "Chicken Claw 凤爪.jpg",
                "Chilli Oil Dumplings 红油抄手.jpg",
                "Chives Dumpling 韭菜餃子.jpg",
                "Egg Tarts.jpg",
                "Fried Shrimp Dumpling.jpg",
                "Har Gao.jpg",
                "Herbal Jelly 龟苓膏.jpg",
                "Lo Mai Kai.jpg",
                "Longevity Peach Bun 寿桃包.jpg",
                "Lotus Seed Bun 蓮蓉包.jpg",
                "Malay Steamed Cake 马来糕.jpg",
                "Mango Pomelo Sago 杨枝甘露.jpg",
                "Mango Pudding.jpg",
                "Pineapple Bun 菠蘿包.jpg",
                "Portuguese Egg Tart.jpg",
                "Red Bean Paste Bun.jpg",
                "Salted Egg Yolk Custard Bun 流沙包.jpg",
                "Siew Mai.jpg",
                "Soon Kueh.jpg",
                "Spring Roll.jpg",
                "Xiao Long Bao.jpg",
                "Yam Cake or Orh Kueh.jpg"
            ].map(filename => `https://raw.githubusercontent.com/jigglinjelly/Category-Pic-Guessing-Game/main/images/DSS/${filename}`), 
            MAS: [
                "August the Merlion.jpg",
                "Bag-Down Benny.jpg",
                "Bloobin.jpg",
                "Blood Buddy.jpg",
                "Captain Green.jpg",
                "Give-Way Glenda.jpg",
                "Hush-Hush Hannah.jpg",
                "LiNUS.jpg",
                "Lyo.jpg",
                "Lyon the Lion.jpg",
                "Merli.jpg",
                "Merly.jpg",
                "Move-In Martin.jpg",
                "Nila.jpg",
                "Sharity Elephant.jpg",
                "Singa the Lion.jpg",
                "Smiley Squirrel.jpg",
                "Stand-up Stacey.jpg",
                "Teamy the Productivity Bee.jpg",
                "Water Sally.jpg",
                "Water Wally.jpg"
            ].map(filename => `https://raw.githubusercontent.com/jigglinjelly/Category-Pic-Guessing-Game/main/images/MAS/${filename}`), 
            PACS: [
                "Angklung Ensemble.jpg",
                "Astronomy Club.jpg",
                "AVA Club.jpg",
                "Chess Club.jpg",
                "Chinese Calligraphy.jpg",
                "Chinese Chess.jpg",
                "Chinese Dance.jpg",
                "Chinese Orchestra.jpg",
                "Choir.jpg",
                "Debate Club.jpg",
                "Drama Club.jpg",
                "Guitar Club.jpg",
                "Guzheng Ensemble.jpg",
                "Handbell Ensemble.jpg",
                "Indian Dance.jpg",
                "Interact Club.jpg",
                "Library Club.jpg",
                "Malay Dance.jpg",
                "Military or Marching Band.jpg",
                "Modern Dance.jpg",
                "Percussion Ensemble.jpg",
                "Photography Club.jpg",
                "Piano Ensemble.jpg",
                "Robotics Club.jpg",
                "Singapore Youth Flying Club.jpg",
                "String Ensemble.jpg",
                "Visual Arts Club.jpg",
                "Weiqi or Go.jpg",
                "Symphonic Band.jpg"
            ].map(filename => `https://raw.githubusercontent.com/jigglinjelly/Category-Pic-Guessing-Game/main/images/PACS/${filename}`),
            UGSP: [
                "Akido.jpg",
                "Archery.jpg",
                "Badminton.jpg",
                "Basketball.jpg",
                "Boys Brigade.jpg",
                "Cricket.jpg",
                "Fencing.jpg",
                "Floorball.jpg",
                "Football.jpg",
                "Girl Guides.jpg",
                "Girls Brigade.jpg",
                "Golf.jpg",
                "Gymnastics.jpg",
                "Hockey.jpg",
                "NCC Air.jpg",
                "NCC Land.jpg",
                "NCC Sea.jpg",
                "NCDCC.jpg",
                "Netball.jpg",
                "NPCC.jpg",
                "ODAC.jpg",
                "Red Cross Youth.jpg",
                "Rugby.jpg",
                "Sailing.jpg",
                "Scouts.jpg",
                "Sepak Takraw.jpg",
                "Shooting.jpg",
                "Softball.jpg",
                "Squash.jpg",
                "St John Ambulance Brigade.jpg",
                "Swimming.jpg",
                "Table Tennis.jpg",
                "Taekwondo.jpg",
                "Tchoukball.jpg",
                "Tennis.jpg",
                "Track And Field.jpg",
                "Ultimate Frisbee.jpg",
                "Volleyball.jpg",
                "Water Polo.jpg",
                "Wushu.jpg"
            ].map(filename => `https://raw.githubusercontent.com/jigglinjelly/Category-Pic-Guessing-Game/main/images/UGSP/${filename}`),
        };

        document.addEventListener('DOMContentLoaded', function() {
            // Game elements
            const currentImageElement = document.getElementById('currentImage');
            const answerDisplayElement = document.getElementById('answerDisplay');
            const correctBtn = document.getElementById('correctBtn');
            const passBtn = document.getElementById('passBtn');
            const pauseBtn = document.getElementById('pauseBtn');
            const startBtn = document.getElementById('startBtn');
            const endGameBtn = document.getElementById('endGameBtn');
            const restartBtn = document.getElementById('restartBtn');
            const gameOverElement = document.getElementById('gameOver');
            const winnerMessageElement = document.getElementById('winnerMessage');
            const playersContainer = document.getElementById('playersContainer');
            const playerCountSelect = document.getElementById('playerCount');
            const initialTimeInput = document.getElementById('initialTime');
            const passPenaltyInput = document.getElementById('passPenalty');
            const categoryElements = document.querySelectorAll('.category');
            const selectedCategoryElement = document.getElementById('selectedCategory');
            const toggleBtn = document.getElementById('toggleCategories');

            // Game state
            let currentPlayer = 1;
            let playerScores = [0, 0, 0, 0]; // Index 0 unused, players start from 1
            let playerTimes = [0, 150, 150, 150, 150]; // Index 0 unused, players start from 1
            let playerNames = ['', 'Player 1', 'Player 2', 'Player 3', 'Player 4'];
            let totalPlayers = 2;
            let timerInterval = null;
            let gameActive = false;
            let gamePaused = false;
            let answerTimeout = null;
            let lastTimerUpdate = 0;
            let usedImages = [];
            let availableImages = [];
            let selectedCategory = null;
            let currentImage = null;

            // Toggle categories visibility
            function toggleCategories() {
                const categoriesContainer = document.querySelector('.categories');
                categoriesContainer.classList.toggle('hidden');
                
                if (categoriesContainer.classList.contains('hidden')) {
                    toggleBtn.textContent = 'Show';
                } else {
                    toggleBtn.textContent = 'Hide';
                }
            }

            // Create player elements dynamically
            function createPlayerElements() {
                totalPlayers = parseInt(playerCountSelect.value);
                
                // Clear existing players except first two
                const existingPlayers = playersContainer.querySelectorAll('.player');
                for (let i = 2; i < existingPlayers.length; i++) {
                    existingPlayers[i].remove();
                }
                
                // Update player 1 and 2 names based on total players
                document.getElementById('player1Name').value = totalPlayers >= 1 ? 'Player 1' : '';
                document.getElementById('player2Name').value = totalPlayers >= 2 ? 'Player 2' : '';
                
                // Create players 3 and 4 if needed
                if (totalPlayers >= 3) {
                    const player3 = document.createElement('div');
                    player3.className = 'player';
                    player3.id = 'player3';
                    player3.innerHTML = `
                        <input type="text" class="player-name" id="player3Name" value="Player 3" maxlength="12">
                        <div class="score">0</div>
                        <div class="time-bank">Time: 60.0s</div>
                    `;
                    playersContainer.appendChild(player3);
                }
                
                if (totalPlayers >= 4) {
                    const player4 = document.createElement('div');
                    player4.className = 'player';
                    player4.id = 'player4';
                    player4.innerHTML = `
                        <input type="text" class="player-name" id="player4Name" value="Player 4" maxlength="12">
                        <div class="score">0</div>
                        <div class="time-bank">Time: 60.0s</div>
                    `;
                    playersContainer.appendChild(player4);
                }
                
                // Update container class for grid layout
                playersContainer.className = `players-container ${totalPlayers === 2 ? 'two-players' : totalPlayers === 3 ? 'three-players' : 'four-players'}`;
                
                // Reset all player states
                resetPlayerStates();
            }

            // Reset all player visual states
            function resetPlayerStates() {
                for (let i = 1; i <= 4; i++) {
                    const playerElement = document.getElementById(`player${i}`);
                    if (playerElement) {
                        playerElement.classList.remove('active');
                        playerElement.querySelector('.score').textContent = '0';
                    }
                }
            }

            // Initialize the game
            function initGame() {
                createPlayerElements();
                
                // Load player names from localStorage
                for (let i = 1; i <= 4; i++) {
                    const savedName = localStorage.getItem(`player${i}Name`);
                    const nameElement = document.getElementById(`player${i}Name`);
                    if (savedName && nameElement) {
                        nameElement.value = savedName;
                    }
                }
                
                // Set up category selection
                categoryElements.forEach(category => {
                    category.addEventListener('click', function() {
                        categoryElements.forEach(c => c.classList.remove('selected'));
                        this.classList.add('selected');
                        selectedCategory = this.getAttribute('data-category');
                        selectedCategoryElement.textContent = selectedCategory.charAt(0).toUpperCase() + selectedCategory.slice(1);
                        startBtn.disabled = false;
                    });
                });
                
                // Set up player count change listener
                playerCountSelect.addEventListener('change', createPlayerElements);
            }

            // Function to start the game
            function startGame() {
                if (!selectedCategory) {
                    alert('Please select a category to start the game.');
                    return;
                }
                
                startBtn.disabled = true;
                startBtn.textContent = "Loading Images...";
                
                const categoryImageUrls = CATEGORIES[selectedCategory];
                availableImages = categoryImageUrls.map(url => {
                    const urlParts = url.split('/');
                    let filename = urlParts[urlParts.length - 1];
                    filename = filename.replace(/\.[^/.]+$/, "");
                    
                    return {
                        name: filename,
                        url: url
                    };
                });
                
                if (availableImages.length < 2) {
                    alert('Selected category has less than 2 images. Please add more images to this category.');
                    startBtn.disabled = false;
                    startBtn.textContent = "Start Game";
                    return;
                }
                
                preloadImages(categoryImageUrls, () => {
                    startBtn.textContent = "Start Game";
                    
                    // Save player names and update total players
                    totalPlayers = parseInt(playerCountSelect.value);
                    for (let i = 1; i <= totalPlayers; i++) {
                        const nameElement = document.getElementById(`player${i}Name`);
                        if (nameElement) {
                            localStorage.setItem(`player${i}Name`, nameElement.value);
                            playerNames[i] = nameElement.value;
                        }
                    }
                    
                    gameActive = true;
                    gamePaused = false;
                    
                    // Initialize player times and scores
                    const initialTime = parseFloat(initialTimeInput.value);
                    for (let i = 1; i <= 4; i++) {
                        playerScores[i] = 0;
                        playerTimes[i] = initialTime;
                    }
                    
                    currentPlayer = 1;
                    usedImages = [];
                    
                    // Update UI for all players
                    for (let i = 1; i <= totalPlayers; i++) {
                        const playerElement = document.getElementById(`player${i}`);
                        if (playerElement) {
                            playerElement.querySelector('.score').textContent = "0";
                            playerElement.querySelector('.time-bank').textContent = `Time: ${initialTime.toFixed(1)}s`;
                        }
                    }
                    
                    resetPlayerStates();
                    document.getElementById('player1').classList.add('active');
                    
                    correctBtn.disabled = false;
                    passBtn.disabled = false;
                    pauseBtn.disabled = false;
                    endGameBtn.disabled = false;
                    pauseBtn.textContent = "Pause";
                    pauseBtn.classList.remove("paused");
                    startBtn.disabled = true;
                    initialTimeInput.disabled = true;
                    passPenaltyInput.disabled = true;
                    playerCountSelect.disabled = true;
                    
                    // Disable all name inputs
                    for (let i = 1; i <= totalPlayers; i++) {
                        const nameElement = document.getElementById(`player${i}Name`);
                        if (nameElement) nameElement.disabled = true;
                    }
                    
                    categoryElements.forEach(category => {
                        category.style.pointerEvents = 'none';
                    });
                    
                    answerDisplayElement.textContent = "";
                    answerDisplayElement.className = "answer-display";
                    
                    // In the startGame() function, add this line:
                    answerOverlay.className = 'answer-overlay'; // Hide overlay at game start
                    
                    nextImage();
                    
                    lastTimerUpdate = Date.now();
                    startTimer();
                });
            }

            // Function to handle next image
            function nextImage() {
                const wasPaused = gamePaused;
                if (!wasPaused) {
                    gamePaused = true;
                    stopTimer();
                }
                
                const unusedImages = availableImages.filter((img, index) => !usedImages.includes(index));
                
                if (unusedImages.length === 0) {
                    endGame("All images have been used!");
                    return;
                }
                
                const randomIndex = Math.floor(Math.random() * unusedImages.length);
                const selectedImageIndex = availableImages.indexOf(unusedImages[randomIndex]);
                currentImage = availableImages[selectedImageIndex];
                usedImages.push(selectedImageIndex);
                
                const newImage = new Image();
                newImage.onload = () => {
                    currentImageElement.src = currentImage.url;
                    if (!wasPaused) {
                        gamePaused = false;
                        lastTimerUpdate = Date.now();
                        startTimer();
                    }
                };
                newImage.onerror = () => {
                    console.error(`Failed to load image: ${currentImage.name}`);
                    
                    // Skip this image and try the next one
                    if (gameActive) {
                        // Remove the failed image from usedImages so we can try another one
                        usedImages.pop(); // Remove the last added (failed) image
                        
                        // Try next image immediately
                        setTimeout(() => {
                            nextImage();
                        }, 500);
                    }
                };
                newImage.src = currentImage.url;
            }

            // Function to start the timer for the current player
            function startTimer() {
                if (timerInterval) {
                    clearInterval(timerInterval);
                }
                
                timerInterval = setInterval(() => {
                    if (!gameActive || gamePaused) return;
                    
                    const now = Date.now();
                    const delta = (now - lastTimerUpdate) / 1000;
                    lastTimerUpdate = now;
                    
                    playerTimes[currentPlayer] -= delta;
                    const playerElement = document.getElementById(`player${currentPlayer}`);
                    if (playerElement) {
                        playerElement.querySelector('.time-bank').textContent = `Time: ${Math.max(0, playerTimes[currentPlayer]).toFixed(1)}s`;
                    }
                    
                    if (playerTimes[currentPlayer] <= 0) {
                        endGame(`${playerNames[currentPlayer]} ran out of time!`);
                    }
                }, 100);
            }

            // Function to stop the timer
            function stopTimer() {
                if (timerInterval) {
                    clearInterval(timerInterval);
                    timerInterval = null;
                }
            }

            // Function to toggle pause state
            function togglePause() {
                if (!gameActive) return;
                
                gamePaused = !gamePaused;
                
                if (gamePaused) {
                    stopTimer();
                    pauseBtn.textContent = "Resume";
                    pauseBtn.classList.add("paused");
                    correctBtn.disabled = true;
                    passBtn.disabled = true;
                } else {
                    lastTimerUpdate = Date.now();
                    startTimer();
                    pauseBtn.textContent = "Pause";
                    pauseBtn.classList.remove("paused");
                    correctBtn.disabled = false;
                    passBtn.disabled = false;
                }
            }

            // Function to switch to next player
            function switchPlayer() {
                // Remove active class from current player
                document.getElementById(`player${currentPlayer}`).classList.remove('active');
                
                // Move to next player (loop back to 1 after last player)
                currentPlayer = currentPlayer % totalPlayers + 1;
                
                // Add active class to new current player
                document.getElementById(`player${currentPlayer}`).classList.add('active');
                
                // Update all time displays
                for (let i = 1; i <= totalPlayers; i++) {
                    const playerElement = document.getElementById(`player${i}`);
                    if (playerElement) {
                        playerElement.querySelector('.time-bank').textContent = `Time: ${playerTimes[i].toFixed(1)}s`;
                    }
                }
            }
            // Function to display answer as overlay on image
            function displayAnswer(isCorrect) {
                stopTimer();
                
                const answerOverlay = document.getElementById('answerOverlay');
                answerOverlay.textContent = `Answer: ${currentImage.name}`;
                answerOverlay.className = `answer-overlay visible ${isCorrect ? 'correct' : 'pass'}`;
                
                if (answerTimeout) {
                    clearTimeout(answerTimeout);
                }
                
                correctBtn.disabled = true;
                passBtn.disabled = true;
                pauseBtn.disabled = true;
                endGameBtn.disabled = true;
                
                answerTimeout = setTimeout(() => {
                    // Hide the overlay
                    answerOverlay.className = 'answer-overlay';
                    
                    const unusedImages = availableImages.filter((img, index) => !usedImages.includes(index));
                    if (unusedImages.length === 0) {
                        endGame("All images have been used!");
                        return;
                    }
                    
                    lastTimerUpdate = Date.now();
                    
                    if (isCorrect) {
                        switchPlayer();
                        nextImage();
                    } else {
                        nextImage();
                    }
                    
                    correctBtn.disabled = false;
                    passBtn.disabled = false;
                    pauseBtn.disabled = false;
                    endGameBtn.disabled = false;
                    startTimer();
                }, 2000);
            }

            // Function to handle correct answer
            function handleCorrect() {
                if (!gameActive || gamePaused) return;
                
                playerScores[currentPlayer]++;
                document.getElementById(`player${currentPlayer}`).querySelector('.score').textContent = playerScores[currentPlayer];
                
                displayAnswer(true);
            }

            // Function to handle pass
            function handlePass() {
                if (!gameActive || gamePaused) return;
                
                const penalty = parseFloat(passPenaltyInput.value);
                playerTimes[currentPlayer] -= penalty;
                
                const playerElement = document.getElementById(`player${currentPlayer}`);
                if (playerElement) {
                    playerElement.querySelector('.time-bank').textContent = `Time: ${playerTimes[currentPlayer].toFixed(1)}s`;
                }
                
                if (playerTimes[currentPlayer] <= 0) {
                    endGame(`${playerNames[currentPlayer]} ran out of time!`);
                    return;
                }
                
                displayAnswer(false);
            }

            // Function to end the game
            function endGame(reason = "") {
                gameActive = false;
                gamePaused = false;
                stopTimer();
                if (answerTimeout) {
                    clearTimeout(answerTimeout);
                }
                
                // Hide the answer overlay when game ends
                const answerOverlay = document.getElementById('answerOverlay');
                answerOverlay.className = 'answer-overlay'; // This hides the overlay

                if (currentImage) {
                    const answerOverlay = document.getElementById('answerOverlay');
                    answerOverlay.textContent = `Final Answer: ${currentImage.name}`;
                    answerOverlay.className = 'answer-overlay visible correct';
                }
                
                correctBtn.disabled = true;
                passBtn.disabled = true;
                pauseBtn.disabled = true;
                startBtn.disabled = false;
                endGameBtn.disabled = true;
                initialTimeInput.disabled = false;
                passPenaltyInput.disabled = false;
                playerCountSelect.disabled = false;
                
                for (let i = 1; i <= totalPlayers; i++) {
                    const nameElement = document.getElementById(`player${i}Name`);
                    if (nameElement) nameElement.disabled = false;
                }
                
                categoryElements.forEach(category => {
                    category.style.pointerEvents = 'auto';
                });
                
                // Determine winner
                let maxScore = -1;
                let winners = [];
                let maxTime = -1;
                let timeWinners = [];
                
                for (let i = 1; i <= totalPlayers; i++) {
                    if (playerScores[i] > maxScore) {
                        maxScore = playerScores[i];
                        winners = [i];
                    } else if (playerScores[i] === maxScore) {
                        winners.push(i);
                    }
                }
                
                let winnerMessage = "";
                if (winners.length === 1) {
                    winnerMessage = `${playerNames[winners[0]]} wins!`;
                } else {
                    // Tie-breaker: most time left
                    for (let i of winners) {
                        if (playerTimes[i] > maxTime) {
                            maxTime = playerTimes[i];
                            timeWinners = [i];
                        } else if (playerTimes[i] === maxTime) {
                            timeWinners.push(i);
                        }
                    }
                    
                    if (timeWinners.length === 1) {
                        winnerMessage = `${playerNames[timeWinners[0]]} wins (tie but more time left)!`;
                    } else {
                        winnerMessage = "It's a tie!";
                    }
                }
                
                if (reason) {
                    winnerMessage = `${reason} ${winnerMessage}`;
                }
                
                // Build score summary
                let scoreSummary = "Final Scores: ";
                for (let i = 1; i <= totalPlayers; i++) {
                    scoreSummary += `${playerNames[i]}: ${playerScores[i]}`;
                    if (i < totalPlayers) scoreSummary += " - ";
                }
                
                winnerMessageElement.textContent = `${winnerMessage} ${scoreSummary}`;
                gameOverElement.style.display = 'block';
                gameOverElement.scrollIntoView({ behavior: 'smooth', block: 'nearest' });
            }

            // Function to handle ending the game prematurely
            function endGamePrematurely() {
                if (!gameActive) return;
                
                const answerOverlay = document.getElementById('answerOverlay');
                answerOverlay.textContent = `Answer: ${currentImage.name}`;
                answerOverlay.className = 'answer-overlay visible correct';
                
                endGame("Game ended prematurely.");
            }

            // Function to preload images
            function preloadImages(imageUrls, callback) {
                let loaded = 0;
                const total = imageUrls.length;
                
                if (total === 0) {
                    callback();
                    return;
                }
                
                imageUrls.forEach(url => {
                    const img = new Image();
                    img.onload = () => {
                        loaded++;
                        if (loaded === total) {
                            callback();
                        }
                    };
                    img.onerror = () => {
                        loaded++;
                        if (loaded === total) {
                            callback();
                        }
                    };
                    img.src = url;
                });
            }

            // Initialize the game
            initGame();
            
            // Event listeners
            startBtn.addEventListener('click', startGame);
            restartBtn.addEventListener('click', function() {
                // Hide game over section and overlay when restarting
                gameOverElement.style.display = 'none';
                const answerOverlay = document.getElementById('answerOverlay');
                answerOverlay.className = 'answer-overlay';
                startGame();
            });
            correctBtn.addEventListener('click', handleCorrect);
            passBtn.addEventListener('click', handlePass);
            pauseBtn.addEventListener('click', togglePause);
            endGameBtn.addEventListener('click', endGamePrematurely);
            toggleBtn.addEventListener('click', toggleCategories);
            
            // Keyboard shortcuts
            document.addEventListener('keydown', function(e) {
                if (!gameActive || endGameBtn.disabled) return; 
                if (correctBtn.disabled) return;
                
                if (e.key === 'ArrowLeft') {
                    handlePass();
                    passBtn.style.transform = 'scale(0.95)';
                    setTimeout(() => {
                        passBtn.style.transform = '';
                    }, 100);
                } else if (e.key === 'ArrowRight') {
                    handleCorrect();
                    correctBtn.style.transform = 'scale(0.95)';
                    setTimeout(() => {
                        correctBtn.style.transform = '';
                    }, 100);
                } else if (e.key === 'p' || e.key === 'P') {
                    togglePause();
                    pauseBtn.style.transform = 'scale(0.95)';
                    setTimeout(() => {
                        pauseBtn.style.transform = '';
                    }, 100);
                } else if (e.key === 'x' || e.key === 'X') {
                    endGamePrematurely();
                    endGameBtn.style.transform = 'scale(0.95)';
                    setTimeout(() => {
                        endGameBtn.style.transform = '';
                    }, 100);
                }
            });
        });
    </script>
</body>
</html>
